<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Porta-4Track (Web)</title>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <header class="panel header">
      <div class="title">Porta-4Track</div>
      <div class="desc">A simple, Tascam-style 4-track in your browser</div>
    </header>

    <section class="panel transport">
      <div class="transport-row">
        <button id="rewBtn" class="secondary" title="Rewind to 0">⏮</button>
        <button id="stopBtn" class="secondary" title="Stop">⏹</button>
        <button id="playBtn" title="Play/Pause">▶</button>
        <button id="recBtn" class="danger" title="Arm global record">●</button>
        <div class="spacer"></div>
        <div class="time" id="timeLabel">00:00.0</div>
        <div class="spacer"></div>
        <label class="speed">
          <span>Varispeed</span>
          <button id="spdDown" class="secondary" title="Slower">–</button>
          <input id="speed" type="range" min="0.88" max="1.12" step="0.001" value="1" />
          <button id="spdUp" class="secondary" title="Faster">+</button>
          <span id="speedVal">1.000x</span>
        </label>
        <label class="master-vol">
          <span>Master</span>
          <input id="masterGain" type="range" min="0" max="1" step="0.01" value="0.9" />
        </label>
        <div class="meter" title="Master output level">
          <div id="masterMeter" class="meter-fill"></div>
        </div>
      </div>
      <div class="transport-row sub">
        <div class="punch">
          <button id="setIn" class="secondary" title="Set In to playhead">IN⟲</button>
          <input id="inTime" type="text" value="00:00.0" class="time-input" />
          <button id="setOut" class="secondary" title="Set Out to playhead">OUT⟲</button>
          <input id="outTime" type="text" value="00:10.0" class="time-input" />
          <button id="autoPunch" class="secondary" aria-pressed="false" title="Auto punch between IN/OUT">AUTO PUNCH</button>
          <button id="punchNow" class="secondary" title="Manual punch while playing">PUNCH</button>
        </div>
        <div class="spacer"></div>
        <div class="click">
          <button id="clickEnable" class="secondary" aria-pressed="false" title="Toggle metronome">CLICK</button>
          <label>
            <span>BPM</span>
            <input id="bpm" type="number" min="20" max="300" value="120" />
          </label>
          <label>
            <span>Sig</span>
            <select id="timesig">
              <option value="4/4" selected>4/4</option>
              <option value="3/4">3/4</option>
              <option value="6/8">6/8</option>
            </select>
          </label>
        </div>
        <div class="spacer"></div>
        <label class="tape">
          <span>Tape Age</span>
          <input id="tapeAge" type="range" min="0" max="1" step="0.01" value="0.15" />
          <span id="tapeVal">15%</span>
        </label>
      </div>
    </section>

    <section class="panel tracks">
      <div id="tracks"></div>
    </section>

    <footer class="panel footer">
      <div>Tips: Arm a track, toggle Rec, then Play to record the mic. Import audio onto any track. Adjust pan/volume. Varispeed changes pitch and timing. This is an MVP; expect rough edges.</div>
    </footer>
  </div>

  <input id="hiddenFile" type="file" accept="audio/*" style="display:none" />
  <script type="module" src="script.js"></script>
</body>
</html>
