<!-- Mirror of former midigenerator/index.html relocated to tape-looper/ -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tape Looper</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <style>body{font-family:'IBM Plex Mono',monospace;background:#0d1117;color:#e6edf3;margin:0;padding:0;line-height:1.4}#app{max-width:1500px;margin:0 auto;padding:1rem 1.5rem}header{text-align:center;margin-bottom:1rem}header h1{margin:0;font-weight:500;font-size:1.9rem;letter-spacing:.5px}.tagline{margin:.25rem 0 0;font-size:.9rem;color:#8b949e}.panel{background:#161b22;border:1px solid #30363d;padding:1rem;margin-bottom:1rem;border-radius:8px}.row{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:.75rem}label{display:flex;flex-direction:column;font-size:.75rem;gap:.25rem;min-width:110px}input[type=number],input[type=text],select{background:#0d1117;color:#e6edf3;border:1px solid #30363d;border-radius:4px;padding:.35rem .5rem;font-family:inherit;font-size:.85rem}input[type=range]{width:100px}button{background:#238636;color:#fff;border:1px solid #2ea043;padding:.45rem .8rem;border-radius:4px;font-family:inherit;font-size:.8rem;cursor:pointer;box-shadow:0 1px 0 rgba(255,255,255,.07) inset,0 1px 2px rgba(0,0,0,.3)}button:disabled{opacity:.4;cursor:default}button.secondary{background:#30363d;color:#e6edf3;border-color:#484f58}#loopList{display:grid;grid-template-columns:repeat(auto-fill,minmax(330px,1fr));gap:1rem}.loopCard{background:#0d1117;border:1px solid #30363d;padding:.75rem;border-radius:6px;display:flex;flex-direction:column;gap:.5rem;position:relative}.loopHeader{display:flex;justify-content:space-between;align-items:center;font-weight:500;font-size:.85rem}.loopHeader button{background:#6e40c9;border-color:#8e5cf5}.loopRow{display:flex;flex-wrap:wrap;gap:.5rem;font-size:.7rem}.loopRow label{flex:1 1 80px}.noteList{display:flex;flex-wrap:wrap;gap:.3rem}.noteTag{background:#238636;padding:.15rem .4rem;border-radius:3px;font-size:.65rem;cursor:pointer}.noteTag.remove{background:#da3633}.addNoteRow{display:flex;gap:.3rem}.addNoteRow input{flex:1}#mobile{display:flex;flex-wrap:wrap;gap:1rem;min-height:120px;justify-content:center}.ring{position:relative;border:1px dashed #30363d;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#8b949e;font-size:.6rem;overflow:visible}.ring .playhead{position:absolute;top:-6px;left:50%;transform:translateX(-50%);width:4px;height:8px;background:#f0883e;border-radius:1px}.ring .dot{position:absolute;width:8px;height:8px;background:#238636;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:7px;color:#fff;box-shadow:0 0 4px #238636aa}.ring .dot.active{background:#da3633;box-shadow:0 0 6px #ff7b72}#ascii{font-family:monospace;white-space:pre;display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem}.asciiRing{padding:.5rem;background:#0d1117;border:1px solid #30363d;border-radius:6px}footer{margin:2rem 0 4rem;text-align:center;font-size:.65rem;color:#6e7681}@media (max-width:750px){#loopList{grid-template-columns:1fr}}</style>
</head>
<body>
  <div id="app">
    <header>
      <h1>Tape Looper</h1>
      <p class="tagline">Asymmetrical generative Rhodes-esque tape loop engine</p>
    </header>

  <section id="controls" class="panel" style="display:none;">
      <div class="row">
        <label>Global Tempo (BPM)
          <input id="tempo" type="number" value="80" min="20" max="200" />
        </label>
        <label>Swing (%)
          <input id="swing" type="number" value="0" min="0" max="90" />
        </label>
        <label>Master Volume
          <input id="masterVol" type="range" min="0" max="1" step="0.01" value="0.7" />
        </label>
        <button id="startBtn">Start</button>
        <button id="stopBtn" disabled>Stop</button>
      </div>
      <div class="row">
        <button id="addLoopBtn">+ Add Loop</button>
        <button id="randomizeBtn">Randomize</button>
        <button id="exportBtn">Export Preset</button>
        <input type="file" id="importFile" style="display:none" accept="application/json" />
        <button id="importBtn">Import Preset</button>
      </div>
    </section>

  <section id="loops" class="panel" style="display:none;">
      <h2>Loops</h2>
      <div id="loopList"></div>
    </section>

  <section id="visual" class="panel" style="display:none;">
      <h2>Mobile View</h2>
      <div id="mobile"></div>
      <h2>ASCII Tape Loops</h2>
      <div id="ascii"></div>
    </section>

    <section id="asciiFull" class="panel" style="background:#0a0e14; position:relative;">
      <div id="asciiScreen" style="margin:0;font-size:13px;line-height:1.2;white-space:pre;overflow:auto;max-height:75vh;font-family:'IBM Plex Mono',monospace; cursor:crosshair; user-select:none;"></div>
      <div id="noteOverlay" style="position:absolute;display:none;background:#161b22;border:1px solid #30363d;border-radius:6px;padding:6px;font-size:11px;font-family:'IBM Plex Mono',monospace;box-shadow:0 2px 8px #000a;min-width:160px;">
        <form id="noteForm" style="display:flex;flex-direction:column;gap:4px;">
          <div style="display:flex;gap:4px;">
            <label style="flex:1;display:flex;flex-direction:column;gap:2px;">Note<input name="note" style="background:#0d1117;color:#e6edf3;border:1px solid #30363d;border-radius:3px;padding:2px 4px;font-size:11px;" placeholder="C4"/></label>
            <label style="flex:1;display:flex;flex-direction:column;gap:2px;">Vel<input name="vel" type="number" step="0.01" min="0" max="1" value="0.6" style="background:#0d1117;color:#e6edf3;border:1px solid #30363d;border-radius:3px;padding:2px 4px;font-size:11px;"/></label>
            <label style="flex:1;display:flex;flex-direction:column;gap:2px;">Dur<input name="dur" type="number" step="0.05" min="0.05" value="0.75" style="background:#0d1117;color:#e6edf3;border:1px solid #30363d;border-radius:3px;padding:2px 4px;font-size:11px;"/></label>
          </div>
          <div style="display:flex;gap:4px;justify-content:flex-end;">
            <button type="submit" style="background:#238636;border:1px solid #2ea043;padding:2px 8px;border-radius:4px;color:#fff;font-size:11px;cursor:pointer;">Add</button>
            <button type="button" id="cancelAdd" style="background:#30363d;border:1px solid #484f58;padding:2px 8px;border-radius:4px;color:#e6edf3;font-size:11px;cursor:pointer;">X</button>
          </div>
          <div style="font-size:10px;color:#8b949e;">Right-click tape to delete nearest note.</div>
        </form>
      </div>
    </section>
    <footer style="text-align:center;font-size:10px;color:#555;">
      <p>ASCII mode • Click bracketed commands • Click inside a tape to add a note • R = record</p>
    </footer>
  </div>
  <script type="module" src="script.js"></script>
</body>
</html>
