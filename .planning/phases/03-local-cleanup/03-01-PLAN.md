---
phase: 03-local-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: true

must_haves:
  truths:
    - "All 11 project repositories are cloned and verified as complete"
    - "Old project folders (4-track, ps4-synth, forward-playground, gelatinous-cube-puzzle-wip, nova3-clone-wip, the-duel) are removed from git history"
    - "Migrated folders (dnd-dm-screen, drift, granular-ambient, interactive-art, textscape) are removed from working directory"
    - "Untracked new-name folders (4-track-tape-looper, dualshock-synth, forward-boardgame, gelatinous-cube-puzzle, nova4, the-duel-boardgame) are removed"
    - "Portfolio core folders (benji-site, archive) remain in monorepo"
    - "Git working directory is clean with no unstaged changes"
  artifacts:
    - path: "C:/GitHub Repos/4-track-tape-looper/.git"
      provides: "Verified cloned repository"
      contains: "git fsck clean exit"
    - path: "C:/GitHub Repos/dnd-dm-screen/.git"
      provides: "Verified cloned repository"
      contains: "git fsck clean exit"
    - path: "C:/GitHub Repos/drift/.git"
      provides: "Verified cloned repository"
      contains: "git fsck clean exit"
    - path: "C:/GitHub Repos/dualshock-synth/.git"
      provides: "Verified cloned repository"
      contains: "git fsck clean exit"
    - path: "C:/GitHub Repos/forward-boardgame/.git"
      provides: "Verified cloned repository"
      contains: "git fsck clean exit"
    - path: "C:/GitHub Repos/gelatinous-cube-puzzle/.git"
      provides: "Verified cloned repository"
      contains: "git fsck clean exit"
    - path: "C:/GitHub Repos/generative-web-art/.git"
      provides: "Verified cloned repository"
      contains: "git fsck clean exit"
    - path: "C:/GitHub Repos/granular-ambient/.git"
      provides: "Verified cloned repository"
      contains: "git fsck clean exit"
    - path: "C:/GitHub Repos/nova4/.git"
      provides: "Verified cloned repository"
      contains: "git fsck clean exit"
    - path: "C:/GitHub Repos/textscape/.git"
      provides: "Verified cloned repository"
      contains: "git fsck clean exit"
    - path: "C:/GitHub Repos/the-duel-boardgame/.git"
      provides: "Verified cloned repository"
      contains: "git fsck clean exit"
  key_links:
    - from: "Local cloned repositories"
      to: "GitHub remote repositories"
      via: "git remote origin"
      pattern: "origin.*github\\.com/pebaum"
    - from: "Git staging area"
      to: "Deleted project folders"
      via: "git add -A"
      pattern: "deleted:.*projects/(4-track|ps4-synth|forward-playground|gelatinous-cube-puzzle-wip|nova3-clone-wip|the-duel)/"
---

<objective>
Clean up the original monorepo by verifying all cloned repositories are complete, removing all migrated and untracked project folders, staging deletions, and committing the cleanup.

Purpose: Complete the migration by removing old project folders from the monorepo while preserving portfolio core (benji-site, archive). This finalizes the transition from monolithic to distributed architecture.

Output: Clean monorepo with only portfolio core remaining, all deletions committed to git, all migrated projects verified in separate repositories.
</objective>

<execution_context>
@c:\Users\pebaum\.claude\get-shit-done\workflows\execute-plan.md
@c:\Users\pebaum\.claude\get-shit-done\templates\summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/phases/03-local-cleanup/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify all cloned repositories are complete and functional</name>
  <files>C:/GitHub Repos/*/â€‹.git</files>
  <action>
For each of the 11 cloned repositories, verify integrity and remote connection:

Repositories to verify:
- 4-track-tape-looper
- dnd-dm-screen
- drift
- dualshock-synth
- forward-boardgame
- gelatinous-cube-puzzle
- generative-web-art
- granular-ambient
- nova4
- textscape
- the-duel-boardgame

For each repository:
1. Navigate to repository: `cd "/c/GitHub Repos/[project-name]"`
2. Verify object database integrity: `git fsck`
   - Expected: "Checking object directories: 100% ... done" with no errors
   - Watch for: "missing object", "unreachable object", "hash mismatch"
3. Verify remote connection: `git remote -v`
   - Expected: origin pointing to github.com/pebaum/[project-name].git for both fetch and push
4. Check working directory state: `git status`
   - Expected: "working tree clean" or "Your branch is up to date"
   - Watch for: uncommitted changes or untracked files

If any repository fails verification:
- Document the failure details
- DO NOT proceed with deletions
- Report issue for manual investigation

Use RESEARCH.md patterns from "Verify Clone Integrity" section (lines 232-248).
  </action>
  <verify>
All 11 repositories pass git fsck with no errors, have correct remote URLs, and clean working directories.

Run: `for repo in 4-track-tape-looper dnd-dm-screen drift dualshock-synth forward-boardgame gelatinous-cube-puzzle generative-web-art granular-ambient nova4 textscape the-duel-boardgame; do echo "=== $repo ===" && cd "/c/GitHub Repos/$repo" && git fsck --quiet && git remote -v | grep -q "github.com/pebaum/$repo" && echo "OK" || echo "FAILED"; done`

Expected output: "OK" for all 11 repositories.
  </verify>
  <done>
All 11 cloned repositories verified as complete with:
- Git fsck passes (no missing/unreachable objects)
- Remote URLs correct (github.com/pebaum/[project-name])
- Working directories clean (no uncommitted changes)
  </done>
</task>

<task type="auto">
  <name>Task 2: Remove untracked folders and stage all deletions</name>
  <files>projects/4-track/, projects/ps4-synth/, projects/forward-playground/, projects/gelatinous-cube-puzzle-wip/, projects/nova3-clone-wip/, projects/the-duel/, projects/dnd-dm-screen/, projects/drift/, projects/granular-ambient/, projects/interactive-art/, projects/textscape/, projects/4-track-tape-looper/, projects/dualshock-synth/, projects/forward-boardgame/, projects/gelatinous-cube-puzzle/, projects/nova4/, projects/the-duel-boardgame/</files>
  <action>
Remove all untracked and migrated folders, then stage deletions in git:

1. Navigate to monorepo: `cd /c/pebaum.github.io`

2. Remove 6 untracked new-name folders (not in git history):
   ```bash
   rm -rf projects/4-track-tape-looper
   rm -rf projects/dualshock-synth
   rm -rf projects/forward-boardgame
   rm -rf projects/gelatinous-cube-puzzle
   rm -rf projects/nova4
   rm -rf projects/the-duel-boardgame
   ```
   - These are untracked folders that should not exist in the monorepo
   - They will not appear in git status since they're untracked

3. Remove 5 migrated folders that exist in working directory:
   ```bash
   rm -rf projects/dnd-dm-screen
   rm -rf projects/drift
   rm -rf projects/granular-ambient
   rm -rf projects/interactive-art
   rm -rf projects/textscape
   ```
   - These folders were migrated but not yet removed from working directory
   - Git will see these as deletions that need staging

4. Check current git status to see all unstaged deletions:
   `git status`
   - Expected: ~150+ deleted files across 11 project folders total
   - Already deleted folders (from git): 4-track, ps4-synth, forward-playground, gelatinous-cube-puzzle-wip, nova3-clone-wip, the-duel
   - Newly deleted folders: dnd-dm-screen, drift, granular-ambient, interactive-art, textscape

5. Stage all deletions:
   `git add -A`
   - This stages deletions of all removed files
   - Use git add -A (not git rm) because files are already deleted from working directory

6. Verify staging is correct:
   `git status`
   - Expected: All deletions in "Changes to be committed" section
   - Watch for: Unintended deletions (benji-site, archive, assets should NOT appear)
   - Watch for: Modifications to files you didn't touch

7. If staging is correct, commit with descriptive message:
   ```bash
   git commit -m "$(cat <<'EOF'
chore(03): remove migrated project folders

Removed projects now in separate repositories:
- projects/4-track â†’ 4-track-tape-looper
- projects/ps4-synth â†’ dualshock-synth
- projects/forward-playground â†’ forward-boardgame
- projects/gelatinous-cube-puzzle-wip â†’ gelatinous-cube-puzzle
- projects/nova3-clone-wip â†’ nova4
- projects/the-duel â†’ the-duel-boardgame
- projects/dnd-dm-screen â†’ dnd-dm-screen
- projects/drift â†’ drift
- projects/granular-ambient â†’ granular-ambient
- projects/interactive-art â†’ generative-web-art
- projects/textscape â†’ textscape

All repositories verified as cloned and functional with git fsck.

Satisfies requirements:
- LOCL-02: Remove project folders from original portfolio repo
- LOCL-03: commander-deck-builder verified as non-existent

Portfolio core (benji-site, archive) preserved.

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
EOF
)"
   ```

Use RESEARCH.md patterns from "Stage Deletions Safely" section (lines 250-268).

IMPORTANT: If git status shows ANY unexpected deletions (benji-site, archive, assets, etc.), DO NOT commit. Use `git restore --staged <file>` to unstage those files.
  </action>
  <verify>
Run `git status` after commit. Expected output:
- "working tree clean" or similar
- No unstaged changes
- Branch ahead of origin/master by 1 commit (the cleanup commit)

Run `git log -1 --oneline` to verify commit message contains "remove migrated project folders".

Verify untracked folders are gone:
`ls projects/ | grep -E "^(4-track-tape-looper|dualshock-synth|forward-boardgame|gelatinous-cube-puzzle|nova4|the-duel-boardgame)$"` returns nothing.
  </verify>
  <done>
All untracked new-name folders removed from working directory (4-track-tape-looper, dualshock-synth, forward-boardgame, gelatinous-cube-puzzle, nova4, the-duel-boardgame), all migrated folders removed (dnd-dm-screen, drift, granular-ambient, interactive-art, textscape), git staging area contains only intended deletions (11 project folders total), commit created with descriptive message documenting which folders were removed and where they now exist, working directory is clean.
  </done>
</task>

<task type="auto">
  <name>Task 3: Validate final repository state matches requirements</name>
  <files>projects/</files>
  <action>
Verify the final state of the monorepo matches all requirements:

1. List remaining project folders:
   `ls projects/`

   Expected folders (MUST remain):
   - benji-site (requirement PORT-02)

   Folders that MUST be gone:
   - 4-track
   - ps4-synth
   - forward-playground
   - gelatinous-cube-puzzle-wip
   - nova3-clone-wip
   - the-duel
   - dnd-dm-screen
   - drift
   - granular-ambient
   - interactive-art
   - textscape
   - 4-track-tape-looper
   - dualshock-synth
   - forward-boardgame
   - gelatinous-cube-puzzle
   - nova4
   - the-duel-boardgame

2. Verify archive folder remains:
   `ls archive/ >/dev/null 2>&1 && echo "archive exists" || echo "archive MISSING"`
   - Expected: "archive exists" (requirement PORT-03)

3. Verify commander-deck-builder is absent:
   `ls commander-deck-builder 2>&1 | grep -q "cannot access" && echo "commander-deck-builder absent" || echo "commander-deck-builder EXISTS"`
   - Expected: "commander-deck-builder absent" (requirement LOCL-03)

4. Check git status is clean:
   `git status`
   - Expected: "working tree clean"
   - No unstaged changes, no untracked files in core directories

5. Document any discrepancies between expected and actual state.

Use RESEARCH.md patterns from "List Remaining Folders After Cleanup" section (lines 299-312).
  </action>
  <verify>
Run the following checks:
1. `ls projects/ | wc -l` returns 1 (only benji-site remains)
2. `ls projects/ | grep -E "^(4-track|ps4-synth|forward-playground|gelatinous-cube-puzzle-wip|nova3-clone-wip|the-duel|dnd-dm-screen|drift|granular-ambient|interactive-art|textscape|4-track-tape-looper|dualshock-synth|forward-boardgame|gelatinous-cube-puzzle|nova4|the-duel-boardgame)$"` returns nothing (all old/untracked folders gone)
3. `ls projects/ | grep benji-site` returns "benji-site" (core preserved)
4. `ls archive/` succeeds (archive preserved)
5. `git status` shows "working tree clean"
  </verify>
  <done>
Final repository state validated:
- 1 project folder remains (benji-site only)
- 11 old/untracked project folders removed (6 abbreviated/wip-suffixed + 5 migrated + 6 new-name)
- Portfolio core preserved (benji-site, archive exist)
- Commander-deck-builder verified absent
- Git working directory clean
- All requirements LOCL-01, LOCL-02, LOCL-03 satisfied
  </done>
</task>

</tasks>

<verification>
After all tasks complete, verify Phase 3 success criteria from ROADMAP.md:

1. All 10 new repositories are cloned to C:\GitHub Repos\[project-name]\ âœ“
   - Verified with git fsck for all 11 repos (10 migrated + the-duel-boardgame)

2. Migrated project folders are removed from original portfolio repo âœ“
   - Deleted and committed: 4-track, ps4-synth, forward-playground, gelatinous-cube-puzzle-wip, nova3-clone-wip, the-duel, dnd-dm-screen, drift, granular-ambient, interactive-art, textscape

3. Commander-deck-builder folder is completely deleted âœ“
   - Verified as non-existent (requirement LOCL-03)

4. Benji-site and archive folders remain in main portfolio repo âœ“
   - Both verified to exist after cleanup

Requirements covered:
- LOCL-01: Clone all new repos to C:\GitHub Repos\[project-name]\ âœ“
- LOCL-02: Remove project folders from original portfolio repo âœ“
- LOCL-03: Delete commander-deck-builder folder completely âœ“
</verification>

<success_criteria>
Phase 3 complete when:

1. All 11 cloned repositories pass integrity verification (git fsck, remote URLs correct)
2. Old project folders (4-track, ps4-synth, forward-playground, gelatinous-cube-puzzle-wip, nova3-clone-wip, the-duel) are deleted and deletion committed to git
3. Migrated folders (dnd-dm-screen, drift, granular-ambient, interactive-art, textscape) are removed
4. Untracked new-name folders (4-track-tape-looper, dualshock-synth, forward-boardgame, gelatinous-cube-puzzle, nova4, the-duel-boardgame) are removed
5. Only benji-site remains in projects/ (all migrated projects now in separate GitHub repos)
6. Portfolio core folders (benji-site, archive) remain in monorepo
7. Commander-deck-builder verified as non-existent
8. Git working directory is clean with no unstaged changes
9. Git commit created documenting cleanup with mapping of old â†’ new repository names
10. All Phase 3 requirements (LOCL-01, LOCL-02, LOCL-03) marked complete in REQUIREMENTS.md

Observable behaviors:
- `git status` shows "working tree clean"
- `ls projects/` shows only benji-site
- `ls projects/` does NOT show old abbreviated/wip-suffixed folders OR migrated folders OR untracked new-name folders
- `git log -1` shows cleanup commit with descriptive message
</success_criteria>

<output>
After completion, create `.planning/phases/03-local-cleanup/03-01-SUMMARY.md` documenting:
- Verification results for all 11 cloned repositories
- List of deleted folders with their new repository locations
- Final folder count and structure
- Requirements satisfied
- Commits created
</output>
