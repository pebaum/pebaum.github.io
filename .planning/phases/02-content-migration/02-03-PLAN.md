---
phase: 02-content-migration
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - C:\GitHub Repos\drift\*
autonomous: true

must_haves:
  truths:
    - "Drift repository contains all 7 versions in organized v1-v7 subdirectories"
    - "Each Drift version has index.html as entry point"
    - "Root index.html provides version selector navigation"
    - "All 7 Drift versions are accessible via version selector links"
    - "Version selector deploys at pebaum.github.io/drift/"
    - "Each version deploys at pebaum.github.io/drift/v[N]/"
  artifacts:
    - path: "C:\\GitHub Repos\\drift\\index.html"
      provides: "Version selector navigation for all 7 Drift versions"
      min_lines: 50
    - path: "C:\\GitHub Repos\\drift\\v1\\index.html"
      provides: "Drift version 1 entry point"
      min_lines: 10
    - path: "C:\\GitHub Repos\\drift\\v2\\index.html"
      provides: "Drift version 2 entry point"
      min_lines: 10
    - path: "C:\\GitHub Repos\\drift\\v7\\index.html"
      provides: "Drift version 7 entry point"
      min_lines: 10
  key_links:
    - from: "Root index.html"
      to: "Version subdirectories"
      via: "HTML anchor links"
      pattern: '<a href="v[1-7]/">'
    - from: "Version index.html files"
      to: "Drift audio-visual experiments"
      via: "HTML/JS content"
      pattern: "index\\.html"
---

<objective>
Migrate Drift project with all 7 versions to single repository with version selector navigation.

Purpose: Handle multi-version project migration with organized subdirectory structure and navigation index, satisfying SPEC-01 and SPEC-02 requirements.

Output: Drift repository with v1-v7 subdirectories, each containing a complete version, plus root index.html version selector deployed to pebaum.github.io/drift/.
</objective>

<execution_context>
@C:\Users\peabu\.claude\get-shit-done\workflows\execute-plan.md
@C:\Users\peabu\.claude\get-shit-done\templates\summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-content-migration/02-RESEARCH.md
@.planning/phases/01-repository-setup/01-01-SUMMARY.md

Source location: C:\pebaum.github.io\projects\drift\
Source structure: "Drift v1", "Drift v2", ... "Drift v7" folders (with spaces)
Target location: C:\GitHub Repos\drift\
Target structure: v1/, v2/, ... v7/ subdirectories (no spaces)

Key finding from research: Drift v1 contains "index-v2.html" while v2-v7 contain "index.html"
Must rename v1/index-v2.html to v1/index.html after copy.

Version selector HTML pattern provided in 02-RESEARCH.md (lines 128-178).
</context>

<tasks>

<task type="auto">
  <name>Organize Drift versions into subdirectories</name>
  <files>C:\GitHub Repos\drift\v1\*, C:\GitHub Repos\drift\v2\*, ..., C:\GitHub Repos\drift\v7\*</files>
  <action>
1. Clone repository: `cd "C:\GitHub Repos" && gh repo clone pebaum/drift`
2. Enter directory: `cd drift`
3. Remove placeholder README: `rm README.md`
4. Create version subdirectories: `mkdir v1 v2 v3 v4 v5 v6 v7`
5. Copy each version from monorepo (quote paths due to spaces in source folder names):
   - `cp -r "C:\pebaum.github.io\projects\drift\Drift v1\*" v1/`
   - `cp -r "C:\pebaum.github.io\projects\drift\Drift v2\*" v2/`
   - `cp -r "C:\pebaum.github.io\projects\drift\Drift v3\*" v3/`
   - `cp -r "C:\pebaum.github.io\projects\drift\Drift v4\*" v4/`
   - `cp -r "C:\pebaum.github.io\projects\drift\Drift v5\*" v5/`
   - `cp -r "C:\pebaum.github.io\projects\drift\Drift v6\*" v6/`
   - `cp -r "C:\pebaum.github.io\projects\drift\Drift v7\*" v7/`
6. Rename v1 index file: `mv v1/index-v2.html v1/index.html`
7. Verify all versions have index.html: `find . -path "*/v*/index.html"`

CRITICAL: Always quote source paths due to spaces in "Drift v1" folder names. Use double quotes on Windows.
  </action>
  <verify>
- All 7 version subdirectories created (v1-v7)
- All version files copied from monorepo
- v1/index.html exists (renamed from index-v2.html)
- All versions v2-v7 have index.html
- Command succeeds: `find . -path "*/v*/index.html" | wc -l` returns 7
  </verify>
  <done>All 7 Drift versions organized in v1-v7 subdirectories with index.html entry points</done>
</task>

<task type="auto">
  <name>Create version selector index</name>
  <files>C:\GitHub Repos\drift\index.html</files>
  <action>
Create root index.html with version selector navigation:

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drift - Version Selection</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 0 20px;
            line-height: 1.6;
        }
        h1 { margin-bottom: 10px; }
        .subtitle { color: #666; margin-bottom: 30px; }
        .version-list { list-style: none; padding: 0; }
        .version-list li { margin-bottom: 15px; }
        .version-list a {
            display: block;
            padding: 15px 20px;
            background: #f5f5f5;
            border-radius: 8px;
            text-decoration: none;
            color: #333;
            transition: background 0.2s;
        }
        .version-list a:hover { background: #e0e0e0; }
        .version-number { font-weight: bold; font-size: 1.1em; }
    </style>
</head>
<body>
    <h1>Drift</h1>
    <p class="subtitle">Evolution of an audio-visual experiment</p>
    <ul class="version-list">
        <li><a href="v1/"><span class="version-number">Version 1</span></a></li>
        <li><a href="v2/"><span class="version-number">Version 2</span></a></li>
        <li><a href="v3/"><span class="version-number">Version 3</span></a></li>
        <li><a href="v4/"><span class="version-number">Version 4</span></a></li>
        <li><a href="v5/"><span class="version-number">Version 5</span></a></li>
        <li><a href="v6/"><span class="version-number">Version 6</span></a></li>
        <li><a href="v7/"><span class="version-number">Version 7</span></a></li>
    </ul>
</body>
</html>
```

Write this exact HTML to C:\GitHub Repos\drift\index.html using Write tool or shell heredoc.
  </action>
  <verify>
- index.html exists at repository root
- File contains version selector HTML with links to v1/ through v7/
- File is valid HTML (no syntax errors)
- Links use relative paths (href="v1/", not absolute paths)
  </verify>
  <done>Version selector index.html created at repository root with links to all 7 Drift versions</done>
</task>

<task type="auto">
  <name>Commit and deploy Drift repository</name>
  <files>C:\GitHub Repos\drift\*</files>
  <action>
1. Stage all files: `git add .`
2. Verify staging: `git status` (should show v1-v7 directories and root index.html)
3. Commit with descriptive message:
```bash
git commit -m "feat: migrate all Drift versions with version selector

- Organize 7 versions into v1-v7 subdirectories
- Rename Drift v1/index-v2.html to v1/index.html
- Create root index.html for version navigation
- Preserve all files as-is from original versions
- Satisfies SPEC-01 (all 7 versions in organized structure)
- Satisfies SPEC-02 (index allows access to all versions)"
```
4. Push to GitHub: `git push origin main`
5. Wait 1-2 minutes for GitHub Pages deployment
  </action>
  <verify>
- Git commit created successfully
- Git push to origin main succeeds (1.2MB total)
- Visit https://pebaum.github.io/drift/ shows version selector
- Visit https://pebaum.github.io/drift/v1/ shows Drift version 1
- Visit https://pebaum.github.io/drift/v7/ shows Drift version 7
- All 7 version links from version selector work
  </verify>
  <done>Drift repository deployed with all 7 versions accessible via version selector at pebaum.github.io/drift/</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Verify local structure:
   - `ls "C:\GitHub Repos\drift"` shows: index.html, v1, v2, v3, v4, v5, v6, v7
   - `find "C:\GitHub Repos\drift" -name "index.html"` shows 8 files (root + 7 versions)

2. Verify version selector functionality:
   - Visit https://pebaum.github.io/drift/
   - Should show "Drift - Evolution of an audio-visual experiment" header
   - Should list 7 version links
   - Click each version link confirms navigation works

3. Verify each version deploys:
   - https://pebaum.github.io/drift/v1/ (not 404)
   - https://pebaum.github.io/drift/v2/ (not 404)
   - ... through v7

4. Verify requirements satisfied:
   - MIGR-03: Drift (all versions) migrated ✓
   - SPEC-01: Drift repo contains all 7 versions in organized structure ✓
   - SPEC-02: Drift repo has index allowing access to all versions ✓
</verification>

<success_criteria>
- Drift repository cloned to C:\GitHub Repos\drift\
- All 7 versions copied to v1-v7 subdirectories
- All 7 versions have index.html entry points
- Root index.html version selector created
- Repository committed and pushed to GitHub
- GitHub Pages deploys version selector at pebaum.github.io/drift/
- All 7 versions accessible at pebaum.github.io/drift/v[1-7]/
- SPEC-01 and SPEC-02 requirements satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/02-content-migration/02-03-SUMMARY.md` documenting:
- Drift migration with 7 versions organized
- Version selector HTML implementation
- v1 index file rename handling
- GitHub Pages deployment verification for all 7 versions
- Total repository size (1.2MB)
</output>
